# === ROUND DOWN (TRUNCATE) TESTS ===
[[round_down_tests]]
a = "12.345"
b = "0"
description = "Round down to integer"
expected = "12"

[[round_down_tests]]
a = "12.345"
b = "1"
description = "Round down to 1 decimal place"
expected = "12.3"

[[round_down_tests]]
a = "12.345"
b = "2"
description = "Round down to 2 decimal places"
expected = "12.34"

[[round_down_tests]]
a = "12.345"
b = "3"
description = "Round to same precision"
expected = "12.345"

[[round_down_tests]]
a = "12.345"
b = "4"
description = "Round to higher precision"
expected = "12.3450"

[[round_down_tests]]
a = "-12.345"
b = "0"
description = "Round down negative to integer"
expected = "-12"

[[round_down_tests]]
a = "-12.345"
b = "1"
description = "Round down negative to 1 decimal place"
expected = "-12.3"

[[round_down_tests]]
a = "-12.345"
b = "2"
description = "Round down negative to 2 decimal places"
expected = "-12.34"

[[round_down_tests]]
a = "0.9999"
b = "0"
description = "Round down near-1 value to integer"
expected = "0"

[[round_down_tests]]
a = "9.9999"
b = "0"
description = "Round down near-10 value to integer"
expected = "9"

# === ROUND UP TESTS ===
[[round_up_tests]]
a = "12.345"
b = "0"
description = "Round up to integer"
expected = "13"

[[round_up_tests]]
a = "12.345"
b = "1"
description = "Round up to 1 decimal place"
expected = "12.4"

[[round_up_tests]]
a = "12.345"
b = "2"
description = "Round up to 2 decimal places"
expected = "12.35"

[[round_up_tests]]
a = "12.345"
b = "3"
description = "Round to same precision"
expected = "12.345"

[[round_up_tests]]
a = "-12.345"
b = "0"
description = "Round up negative to integer"
expected = "-13"

[[round_up_tests]]
a = "-12.345"
b = "1"
description = "Round up negative to 1 decimal place"
expected = "-12.4"

[[round_up_tests]]
a = "0.001"
b = "0"
description = "Round up small positive value to integer"
expected = "1"

[[round_up_tests]]
a = "-0.001"
b = "0"
description = "Round up small negative value to integer"
expected = "-1"

# === ROUND HALF UP TESTS ===
[[round_half_up_tests]]
a = "12.5"
b = "0"
description = "Round half up to integer"
expected = "13"

[[round_half_up_tests]]
a = "12.4"
b = "0"
description = "Round half up where less than .5"
expected = "12"

[[round_half_up_tests]]
a = "12.25"
b = "1"
description = "Round half up to 1 decimal place"
expected = "12.3"

[[round_half_up_tests]]
a = "12.35"
b = "1"
description = "Round half up exactly .5 to 1 decimal place"
expected = "12.4"

[[round_half_up_tests]]
a = "-12.5"
b = "0"
description = "Round half up negative to integer"
expected = "-13"

[[round_half_up_tests]]
a = "-12.45"
b = "1"
description = "Round half up negative to 1 decimal place"
expected = "-12.5"

[[round_half_up_tests]]
a = "0.5"
b = "0"
description = "Round half up exactly 0.5 to integer"
expected = "1"

[[round_half_up_tests]]
a = "-0.5"
b = "0"
description = "Round half up exactly -0.5 to integer"
expected = "-1"

# === ROUND HALF EVEN TESTS (BANKER'S ROUNDING) ===
[[round_half_even_tests]]
a = "12.5"
b = "0"
description = "Round half even to integer (toward even digit)"
expected = "12"

[[round_half_even_tests]]
a = "13.5"
b = "0"
description = "Round half even to integer (toward even digit)"
expected = "14"

[[round_half_even_tests]]
a = "12.25"
b = "1"
description = "Round half even to 1 decimal place (toward even digit)"
expected = "12.2"

[[round_half_even_tests]]
a = "12.35"
b = "1"
description = "Round half even to 1 decimal place (toward even digit)"
expected = "12.4"

[[round_half_even_tests]]
a = "12.65"
b = "1"
description = "Round half even to 1 decimal place (toward even digit)"
expected = "12.6"

[[round_half_even_tests]]
a = "12.75"
b = "1"
description = "Round half even to 1 decimal place (toward even digit)"
expected = "12.8"

[[round_half_even_tests]]
a = "-12.5"
b = "0"
description = "Round half even negative to integer (toward even digit)"
expected = "-12"

[[round_half_even_tests]]
a = "-13.5"
b = "0"
description = "Round half even negative to integer (toward even digit)"
expected = "-14"

[[round_half_even_tests]]
a = "0.5"
b = "0"
description = "Round half even exactly 0.5 to integer (0 is even)"
expected = "0"

[[round_half_even_tests]]
a = "-0.5"
b = "0"
description = "Round half even exactly -0.5 to integer (0 is even)"
expected = "-0"

# === ROUND HALF DOWN TESTS ===
[[round_half_down_tests]]
a = "12.345"
b = "0"
description = "Round half down to integer"
expected = "12"

[[round_half_down_tests]]
a = "12.345"
b = "1"
description = "Round half down to 1 decimal place"
expected = "12.3"

[[round_half_down_tests]]
a = "12.345"
b = "2"
description = "Round half down to 2 decimal places"
expected = "12.34"

[[round_half_down_tests]]
a = "12.5"
b = "0"
description = "Round half down exactly 0.5 to integer (tie goes toward zero)"
expected = "12"

[[round_half_down_tests]]
a = "13.5"
b = "0"
description = "Round half down exactly 13.5 to integer (tie goes toward zero)"
expected = "13"

[[round_half_down_tests]]
a = "12.501"
b = "0"
description = "Round half down 12.501 to integer (above tie, rounds up)"
expected = "13"

[[round_half_down_tests]]
a = "-12.5"
b = "0"
description = "Round half down negative tie (toward zero)"
expected = "-12"

[[round_half_down_tests]]
a = "-12.501"
b = "0"
description = "Round half down negative above tie (away from zero)"
expected = "-13"

[[round_half_down_tests]]
a = "12.345"
b = "3"
description = "Round half down at exactly 0.005 tie (toward zero)"
expected = "12.344"

[[round_half_down_tests]]
a = "12.3451"
b = "3"
description = "Round half down above 0.005 tie (rounds up)"
expected = "12.345"

[[round_half_down_tests]]
a = "-12.345"
b = "2"
description = "Round half down negative -12.345 to 2 decimal places"
expected = "-12.34"

[[round_half_down_tests]]
a = "0.5"
b = "0"
description = "Round half down exactly 0.5 to integer"
expected = "0"

[[round_half_down_tests]]
a = "-0.5"
b = "0"
description = "Round half down exactly -0.5 to integer"
expected = "-0"

[[round_half_down_tests]]
a = "1.050"
b = "1"
description = "Round half down exactly at tie 1.050"
expected = "1.0"

[[round_half_down_tests]]
a = "1.15"
b = "1"
description = "Round half down exactly at tie 1.15"
expected = "1.1"

[[round_half_down_tests]]
a = "1.16"
b = "1"
description = "Round half down above tie 1.16"
expected = "1.2"

# === EXTREME VALUES TESTS ===
[[extreme_value_tests]]
a = "0.{0,25}1"
b = "10"
description = "Rounding very small number"
expected = "0E-10"

[[extreme_value_tests]]
a = "{9,28}.99999"
b = "2"
description = "Rounding very large number"
expected = "1.{0,30}E+28"

[[extreme_value_tests]]
a = "0.{5,25}"
b = "10"
description = "Rounding repeated digits"
expected = "0.5555555556"

[[extreme_value_tests]]
a = "1.{0,26}1"
b = "10"
description = "Rounding number very close to whole"
expected = "1.{0,10}"

[[extreme_value_tests]]
a = "-0.{0,26}1"
b = "10"
description = "Rounding very small negative number (becomes zero)"
expected = "-0E-10"

# === SPECIAL EDGE CASES ===
[[edge_case_tests]]
a = "9.{9,25}"
b = "2"
description = "Rounding causes carrying over to next digit"
expected = "10.00"

[[edge_case_tests]]
a = "999.{9,25}"
b = "0"
description = "Rounding causes carrying over to next 10s place"
expected = "1000"

[[edge_case_tests]]
a = "0.{0,25}5"
b = "28"
description = "Rounding at maximum precision boundary"
expected = "5.00E-26"

[[edge_case_tests]]
a = "0"
b = "10"
description = "Rounding zero"
expected = "0E-10"

[[edge_case_tests]]
a = "-0"
b = "10"
description = "Rounding negative zero"
expected = "-0E-10"

[[edge_case_tests]]
a = "0.4{9,26}"
b = "0"
description = "Rounding just under half"
expected = "0"

[[edge_case_tests]]
a = "0.5{0,25}1"
b = "0"
description = "Rounding just over half"
expected = "1"

# === PRECISION CONVERSIONS ===
[[precision_tests]]
a = "123.456"
b = "-2"
description = "Rounding to negative precision (hundreds)"
expected = "1E+2"

[[precision_tests]]
a = "1234.56"
b = "-1"
description = "Rounding to negative precision (tens)"
expected = "1.23E+3"

[[precision_tests]]
a = "1234.56"
b = "-3"
description = "Rounding to negative precision (thousands)"
expected = "1E+3"

[[precision_tests]]
a = "9999.99"
b = "-3"
description = "Rounding to negative precision with carry"
expected = "1.0E+4"

[[precision_tests]]
a = "0.000123456"
b = "5"
description = "Rounding where leading zeros matter"
expected = "0.00012"

# === SCIENTIFIC NOTATION INPUTS ===
[[scientific_tests]]
a = "1.2345e5"
b = "2"
description = "Rounding scientific notation value"
expected = "123450.00"

[[scientific_tests]]
a = "1.2345e-5"
b = "8"
description = "Rounding small scientific notation value"
expected = "0.00001234"

[[scientific_tests]]
a = "9.9999e20"
b = "0"
description = "Rounding large scientific notation value"
expected = "99999{0,16}"

[[scientific_tests]]
a = "-1.2345e-10"
b = "12"
description = "Rounding negative scientific notation value"
expected = "-1.23E-10"

# === QUANTIZE TESTS ===
# Test quantize() function with different templates

[[quantize_basic_tests]]
a = "1.2345"
b = "0.001"
description = "Quantize to 3 decimal places"
expected = "1.234"

[[quantize_basic_tests]]
a = "1.2345"
b = "0.01"
description = "Quantize to 2 decimal places"
expected = "1.23"

[[quantize_basic_tests]]
a = "1.2345"
b = "0.1"
description = "Quantize to 1 decimal place"
expected = "1.2"

[[quantize_basic_tests]]
a = "1.2345"
b = "1"
description = "Quantize to integer (scale=0)"
expected = "1"

[[quantize_basic_tests]]
a = "1.2345"
b = "100"
description = "Quantize to integer using 100 (scale=0)"
expected = "1"

[[quantize_basic_tests]]
a = "1.2345"
b = "1E+2"
description = "Quantize to hundreds place (scale=-2)"
expected = "0E+2"

[[quantize_financial_tests]]
a = "19.999"
b = "0.01"
description = "Round price to cents"
expected = "20.00"

[[quantize_financial_tests]]
a = "20.1"
b = "0.01"
description = "Align price to cents precision"
expected = "20.10"

[[quantize_scientific_tests]]
a = "123.456789"
b = "0.001"
description = "Quantize to 3 decimals"
expected = "123.457"

[[quantize_scientific_tests]]
a = "123.456789"
b = "1E-6"
description = "Quantize to 6 decimals"
expected = "123.456789"

[[quantize_scientific_tests]]
a = "123.456789"
b = "100"
description = "Quantize with scale=0 (not scale=-2)"
expected = "123"

[[quantize_scientific_tests]]
a = "123.456789"
b = "1E+2"
description = "Quantize to hundreds (scale=-2)"
expected = "1E+2"

[[quantize_negative_scale_tests]]
a = "123.456"
b = "1E+1"
description = "Quantize to tens place (scale=-1)"
expected = "1.2E+2"

[[quantize_negative_scale_tests]]
a = "123.456"
b = "1E+2"
description = "Quantize to hundreds place (scale=-2)"
expected = "1E+2"

[[quantize_negative_scale_tests]]
a = "123.456"
b = "1E+3"
description = "Quantize to thousands place (scale=-3)"
expected = "0E+3"

[[quantize_negative_scale_tests]]
a = "123.456"
b = "10"
description = "Quantize with template '10' (scale=0, not -1)"
expected = "123"

[[quantize_negative_scale_tests]]
a = "123.456"
b = "100"
description = "Quantize with template '100' (scale=0, not -2)"
expected = "123"

[[quantize_add_zeros_tests]]
a = "1.2"
b = "0.0001"
description = "Add trailing zeros to 4 decimals"
expected = "1.2000"

[[quantize_add_zeros_tests]]
a = "1.2"
b = "0.000001"
description = "Add trailing zeros to 6 decimals"
expected = "1.200000"

[[quantize_same_scale_tests]]
a = "1.23"
b = "0.01"
description = "Quantize when scales already match"
expected = "1.23"

[[quantize_normalization_tests]]
a = "311.14159"
b = "3.1E+2"
description = "Template '3.1E+2' normalized to scale=-1"
expected = "3.1E+2"

[[quantize_normalization_tests]]
a = "311.14159"
b = "31E1"
description = "Template '31E1' normalized to scale=-1 (same as 3.1E+2)"
expected = "3.1E+2"

[[quantize_normalization_tests]]
a = "311.14159"
b = "310E0"
description = "Template '310E0' has scale=0 (integer precision)"
expected = "311"

[[quantize_normalization_tests]]
a = "311.14159"
b = "1000E1"
description = "Template '1000E1' has scale=-1 (tens place)"
expected = "3.1E+2"

[[quantize_edge_cases_tests]]
a = "0.5"
b = "1"
description = "Quantize 0.5 to integer (rounds to 0 with HALF_EVEN)"
expected = "0"

[[quantize_edge_cases_tests]]
a = "1.5"
b = "1"
description = "Quantize 1.5 to integer (rounds to 2 with HALF_EVEN)"
expected = "2"

[[quantize_edge_cases_tests]]
a = "2.5"
b = "1"
description = "Quantize 2.5 to integer (rounds to 2 with HALF_EVEN)"
expected = "2"

[[quantize_edge_cases_tests]]
a = "3.5"
b = "1"
description = "Quantize 3.5 to integer (rounds to 4 with HALF_EVEN)"
expected = "4"

[[quantize_edge_cases_tests]]
a = "-1.5"
b = "1"
description = "Quantize -1.5 to integer (rounds to -2 with HALF_EVEN)"
expected = "-2"

[[quantize_rounding_mode_tests]]
a = "1.235"
b = "0.01"
description = "Quantize with HALF_EVEN rounding"
expected = "1.24"

[[quantize_rounding_mode_tests]]
a = "1.235"
b = "0.01"
description = "Quantize with HALF_UP rounding"
expected = "1.24"

[[quantize_rounding_mode_tests]]
a = "1.235"
b = "0.01"
description = "Quantize with DOWN rounding"
expected = "1.23"

[[quantize_rounding_mode_tests]]
a = "1.235"
b = "0.01"
description = "Quantize with UP rounding"
expected = "1.24"
